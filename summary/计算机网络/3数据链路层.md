# 数据链路层

## 信道类型

- 点对点信道
- 广播信道

## 帧

帧头、帧尾、校验值、物理层地址

## 三个基本问题

封装成帧、透明传输、差错控制

### 封装成帧

![1552131271720](img/1552131271720.jpg)

### 透明传输

![1552131296025](img/1552131296025.jpg)

### 差错控制

循环冗余校验CRC

![1552131635052](img/1552131635052.jpg)

## 使用点对点信道的数据链路层（PPP协议）

PPP适用于广域网

PPP不使用序号和确认机制

![1552132553724](img/1552132553724.jpg)

![1552132735965](img/1552132735965.jpg)

## 使用广播信道的数据链路层（CSMA/CD）

- CSMA/CD适用于局域网

- 总线型和集线器型使用此协议，而交换机不是使用这个协议

- 以广播形式实现一对一通信

![1552133814043](img/1552133814043.jpg)

![1552133871739](img/1552133871739.jpg)

### 特性

- CSMA/CD协议的以太网不能进行全双工通信而只能实现半双工通信

- 每个站在发送数据之后的一小段时间（单程时间的2倍）内，存在着遭遇碰撞的可能性
- 发送的不确定性使整个以太网的平均通信量远小于以太网的最高数据率


## 以太局域网

- 分为LLC层和MAC层，LLC层不大使用
- 尽最大努力交付

### MAC层

适配器从网络上每收到一个MAC帧就先用硬件检查MAC帧中的MAC地址，若是给自己的则收下；否则丢弃。

发往本站的帧包括：

- 单播（一对一）
- 广播（一对全体）
- 多播（一对多）

#### MAC帧格式

![1552179332480](img/1552179332480.jpg)

### 扩展以太网

- 使用光纤    距离变长
- 物理层：集线器级联，组建了一个大的冲突域

### 优化以太网

数据链路层扩展：使用网桥，当它收到一个帧时，不是向所有接口转发此帧，而是检查此帧的目的MAC地址，然后再转发（它能记录以前传过的帧的源MAC地址在哪一端）。也就是说网桥能隔离冲突。交换机的前身就是网桥，它取代了集线器。

**交换机特点：**

- 全双工的
- 带宽独享（即连的计算机的数量不影响每台计算机的带宽）
- 安全（不能用抓包工具拿到不是发给自己的数据）