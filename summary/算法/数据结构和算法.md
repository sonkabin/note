# 整理

## 数据结构

### 布隆过滤器

是一种比较巧妙的概率型数据结构，特点是高效地插入和查询，用来告诉你 **“某样东西一定不存在或者可能存在”**。

1. 优点：高效、占用空间小
2. 缺点：返回的结果是概率性的，而不是确切的

#### 应用场景

1. 利用布隆过滤器减少磁盘 IO 或者网络请求，因为一旦一个值必定不存在，就不必进行后续的昂贵查询请求，类似的有 MurmurHash、Fnv 

2. 大value拆分

   Redis 因其支持 setbit 和 getbit 操作，且纯内存性能高等特点，可以作为布隆过滤器来使用。但是布隆过滤器的不当使用极易产生大 Value，增加 Redis 阻塞风险，因此生成环境中建议对体积庞大的布隆过滤器进行拆分。

   拆分的形式方法多种多样，但是本质是不要将 Hash(Key) 之后的请求分散在多个节点的多个小 bitmap 上，而是应该拆分成多个小 bitmap 之后，对一个 Key 的所有哈希函数都落在这一个小 bitmap 上。

#### [整理](数据结构和算法/BitMap.md)

#### 参考资料

[详解布隆过滤器的原理，使用场景和注意事项](<https://zhuanlan.zhihu.com/p/43263751>)

[Java面试中常用的BitMap代码](<https://www.jianshu.com/p/9e7f8f33a61a>)

### 并查集

待补充

## 算法

### 前缀和

[整理](数据结构和算法/前缀和.md)

### 第K大的数

[整理](数据结构和算法/第K大的数.md)

## 数学

1. 对数公式

   换底公式： $log_{a}b = \frac{log_{c} b} {log_{c} a}$ ，证明 $log_a b = \frac{log_a b * log_c a} {log_c a} = \frac{log_c a^{log_a b}} {log_c a} = \frac{log_c b} {log_c a}$ . 

   $log_{a}b * log_{b}a = 1$ ，证明 $log_a b * log_b a = \frac{log_b b} {log_b a} * log_b a = 1$.

    

## 其他

### 尾递归

精髓是**通过参数传递结果，达到不压栈的目的**

#### 尾递归的原理

当编译器检测到一个函数调用是尾递归的时候，它就**覆盖当前的活动记录**而不是在栈中去创建一个新的。通过覆盖当前的栈帧而不是在其之上重新添加一个，这样所使用的栈空间就大大缩减了，这使得实际的运行效率会变得更高。

1. 递归形式的阶乘

   ```java
   public int fact(int n){
       if(n < 0)	return 0;
       if(n == 0 || n == 1)	return 1;
       return n * fact(n - 1);
   }
   ```

2. 尾递归形式的阶乘

   ```java
   public int facttail(int n, int res){
       if(n < 0)	return 0;
       if(n == 0)	return 1;
       if(n == 1)	return res;
       return facttail(n - 1, n * res);
   }
   ```

3. 分析

   代码1，每次函数调用计算n \* (n-1)!，然后让n=n-1，直到n=1，因为每次函数调用都依赖于用n乘以下一个函数调用的返回值，所以每次堆栈都要保存这次的结果直到下一个函数返回

   代码2，当n==1时直接返回res，而不是返回让前一个函数处理

4. 对于函数式编程来说，由于没有for、while，因此无法写出循环，而直接使用递归需要更多的空间，因此若使用尾递归，编译器将会将源码编译成循环形式。也就是说尾递归可以从循环转化过来。

   **把循环改成尾递归，有一个通用的技巧**，那就是把循环的写法中，需要使用变量的地方，都改成递归参数。在计算时需要使用的变量并不会变少，但我们却不再操心变量的赋值。

   [pow实现(使用快速幂的尾递归或循环)](<https://leetcode-cn.com/problems/powx-n/>)

#### 参考资料

[递归和尾递归的区别和原理](https://blog.csdn.net/zcyzsy/article/details/77151709)

[尾递归优化](<https://zhuanlan.zhihu.com/p/24305359>)

